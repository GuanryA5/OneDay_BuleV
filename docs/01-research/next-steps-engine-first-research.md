# 研究报告：BlueV 下一步优先开发方向（Engine-first）
- **日期:** 2025-09-01
- **背景:** 环境与 CI/CD 已在 Windows 11 + Git Bash + Conda 上统一。需要确定 MVP 阶段最能快速交付价值、并为后续 UI/视觉扩展奠定基础的优先开发路径。
- **核心问题:** 先实现“引擎 + 节点”的可运行闭环，还是先做 UI 编辑器，或先做视觉封装？

## 1. 备选方案 (Options Considered)
- **方案A: Engine-first（推荐）** — 完成 BaseNode、NodeRegistry、WorkflowEngine 最小闭环 + 5 个核心节点（截图/找图/点击/延迟/日志）+ 示例工作流
- **方案B: Editor-first** — 优先 PySide6 节点编辑器（画布/连线/属性面板/右键菜单），引擎/节点后置
- **方案C: Vision-first** — 优先 OpenCV 封装层（模板匹配/预处理），先打磨识别能力

## 2. `Context7 MCP` 对比分析
| 标准 | 方案A Engine-first | 方案B Editor-first | 方案C Vision-first |
| :-- | :-- | :-- | :-- |
| 1. 目标范围 | 覆盖 PRD 与 Phase1 共同最小集，立即可运行 | 产出看得见的 UI，但不可执行 | 产出算法组件，无法独立展示价值 |
| 2. 技术契合（Win+Git Bash） | 可充分验证 DPI/焦点/权限等关键点 | UI 侧更关注渲染，系统兼容度验证不足 | 仅视觉侧验证，不覆盖输入/执行链 |
| 3. 性能扩展 | 引擎是性能锚点，便于后续优化 | UI 优化与执行性能耦合度低 | 仅算法性能，与执行链脱节 |
| 4. 安全可靠 | 引擎/节点可编写稳定可测的无 UI 测试 | 前期缺测试基座 | 缺工作流上下文，难建立系统级测试 |
| 5. 维护简洁 | 明确接口边界（节点契约/上下文） | UI 先行易造成模型反向约束 | 早期抽象不稳定，重构成本高 |
| 6. 成本效益 | 2 周内可交付可演示最小闭环 | UI 进展快但不可运行 | 可复用但演示性差 |
| 7. 最佳实践 | 引擎先行、上层渐进集成 | UI 先行风险高 | 单一能力优先级较低 |

## 3. 最终建议与理由 (Recommendation & Rationale)
- **结论:** 采用 **方案A（Engine-first）**。
- **核心理由:**
  - 最快形成“可运行演示”，利于外部反馈与内循环验证
  - 建立稳定的接口与契约（BaseNode/Context/Registry），降低后续 UI/视觉接入成本
  - 测试/CI 能力可马上沉淀在核心路径（节点执行、工作流调度）

## 附：现状盘点（证据要点）
- core 层（BaseNode/NodeRegistry/WorkflowEngine）已有雏形
- 节点侧已具备最小集（截图/找图/点击/延迟/日志）
- UI/vision 封装尚未成型；先做引擎更稳妥
